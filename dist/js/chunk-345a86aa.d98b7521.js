(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-345a86aa"],{"2d5c":function(t,e,n){},3856:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?n("div",{staticClass:"loading-page",class:{blur:t.isBlur}},[t._m(0)]):t._e()},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loading-box"},[n("div",{staticClass:"loading-ring-out"},[n("div",{staticClass:"loading-ring-inner"})]),n("div",{staticClass:"loading-box-1"},[n("div",{staticClass:"loading-dot-1"})]),n("div",{staticClass:"loading-box-2"},[n("div",{staticClass:"loading-dot-2"})]),n("div",{staticClass:"loading-box-3"},[n("div",{staticClass:"loading-dot-3"})])])}],i={name:"loading",props:{isLoading:{type:Boolean,default:!1},isBlur:{type:Boolean,default:!1}}},r=i,a=(n("d770"),n("2877")),c=Object(a["a"])(r,s,o,!1,null,null,null);e["a"]=c.exports},"7e23":function(t,e,n){"use strict";var s=n("a233"),o=n.n(s);o.a},8062:function(t,e,n){"use strict";var s=n("95b1"),o=n.n(s);o.a},"95b1":function(t,e,n){},"979d":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n("4160"),n("159b");function s(t){var e=[];return t.forEach((function(t){var n={songID:t.songMid,songName:t.songName,singer:[],albumName:t.album.albumName,albumID:t.album.albumMid,albumImgUrl:"https://y.gtimg.cn/music/photo_new/T002R300x300M000".concat(t.album.albumMid,".jpg?max_age=2592000")};t.singerList.forEach((function(t){n.singer.push({name:t.singerName,ID:t.singerMid})})),e.push(n)})),e}},a233:function(t,e,n){},a305:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-list-page"},[n("loading",{attrs:{isLoading:t.isLoading,isBlur:!0}}),n("song-list",{attrs:{list:t.searchList,isShowLoadMore:!0,loadMoreText:t.loadMoreText},on:{loadMore:t.loadMoreSearchSong}})],1)},o=[],i=n("2909"),r=(n("96cf"),n("1da1")),a=n("5530"),c=n("ade3"),l=n("2f62"),g=n("979d"),u=n("fe48"),d=n("a986"),h=n("3856"),m={name:"search-page",data:function(){return Object(c["a"])({searchList:[],loadMoreText:"加载更多",currentPage:1,isLoading:!1},"loadMoreText","加载更多")},components:{SongList:d["a"],Loading:h["a"]},computed:Object(a["a"])({},Object(l["b"])(["searchText"])),watch:{searchText:function(t){console.log(t),this.searchSong()}},mounted:function(){this.searchSong()},methods:{searchSong:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.searchText,t.currentPage=1,t.isLoading=!0,t.loadMoreText="加载更多",e.prev=4,e.next=7,Object(u["j"])({keyword:n,page:1});case 7:s=e.sent,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](4),t.$message.showMessage({type:"error",message:"请求数据出错："+e.t0}),t.isLoading=!1;case 14:console.log("searchListData",s),t.isLoading=!1,o=Object(g["a"])(s.songList),t.searchList=o;case 18:case"end":return e.stop()}}),e,null,[[4,10]])})))()},loadMoreSearchSong:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,s,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.currentPage+=1,t.loadMoreText="加载中...",s=t.searchText,e.prev=3,e.next=6,Object(u["j"])({keyword:s,page:t.currentPage});case 6:o=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](3),t.$message.showMessage({type:"error",message:"请求数据出错："+e.t0}),t.loadMoreText="加载更多";case 13:console.log("searchListData",o),r=Object(g["a"])(o.songList),(n=t.searchList).push.apply(n,Object(i["a"])(r)),r.length<50?t.loadMoreText="没有更多了q(≧▽≦q)":t.loadMoreText="加载更多";case 17:case"end":return e.stop()}}),e,null,[[3,9]])})))()}}},p=m,f=(n("7e23"),n("2877")),v=Object(f["a"])(p,s,o,!1,null,null,null);e["default"]=v.exports},a986:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"song-list"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowBackTop,expression:"isShowBackTop"}],staticClass:"song-list-backtop",on:{click:t.backTop}},[s("img",{attrs:{src:n("e6d9"),width:"30px"}})]),t._m(0),s("div",{ref:"songListBoxDOM",staticClass:"song-list-box",on:{scroll:t.scroll}},[t._l(t.list,(function(e,n){return s("div",{key:e.songID,staticClass:"song-list-item",style:(0===t.currentList.length?"":t.currentList[t.currentListIndex].songID===e.songID?t.playingSongStyle:"")||(t.selectSongIndex===n?t.selectSongStyle:""),on:{contextmenu:function(s){return t.mouseRightClick(s,e,n)}}},[t.isShowMarkImg?s("div",{staticClass:"mark-img"},[s("img",{attrs:{src:t.setMarkImgUrl(e),width:"18px"},on:{click:function(e){return t.removeMarkSong(n)}}})]):s("div",{staticClass:"like-img"},[s("img",{attrs:{src:t.setLikeImgUrl(e),width:"18px"},on:{click:function(n){return t.likeSong(e)}}})]),s("div",{staticClass:"song-list-song-name",on:{click:function(s){return t.playThisSong(e,n)}}},[t._v(" "+t._s(e.songName)+" ")]),s("div",{staticClass:"song-list-singer-name",on:{click:function(s){return t.playThisSong(e,n)}}},[s("span",{on:{click:function(n){return n.stopPropagation(),t.showSinger(e)}}},[t._v(t._s(t.showSingerName(e)))])]),s("div",{staticClass:"song-list-album-name",on:{click:function(s){return t.playThisSong(e,n)}}},[t._v(" "+t._s(e.albumName)+" ")])])})),0!==t.list.length&&!0===t.isShowLoadMore?s("div",{staticClass:"load-more",on:{click:t.loadMore}},[t._v(" "+t._s(t.loadMoreText)+" ")]):t._e()],2)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"song-list-title"},[n("div"),n("div",[t._v("歌名")]),n("div",[t._v("歌手")]),n("div",[t._v("专辑")])])}],i=(n("4160"),n("a15b"),n("b0c0"),n("159b"),n("96cf"),n("1da1")),r=n("5530"),a=n("2f62"),c=n("fe48"),l={name:"song-list",props:{list:{type:Array,default:function(){return[]}},isShowLoadMore:{type:Boolean,default:!1},loadMoreText:{type:String,default:"加载更多"},isShowMarkImg:{type:Boolean,default:!1},isKeepScrollPositon:{type:Boolean,default:!0}},data:function(){return{likeImgUrl:n("c8e1"),likedImgUrl:n("fbd3"),markImgUrl:n("c384"),markedImgUrl:n("c1b2"),scrollerPosition:0,isShowBackTop:!1,playingSongStyle:{"background-color":"var(--highlight-color)","border-radius":"10px"},selectSongIndex:null,selectSongStyle:{"border-radius":"10px","background-color":"rgba(197, 181, 240, 0.5)"}}},computed:Object(r["a"])(Object(r["a"])({},Object(a["b"])(["currentList","currentListIndex","likedList","markList"])),{},{listId:function(){if(this.list.length>0)return this.list[0].songID}}),watch:{listId:function(){this.backTop()}},mounted:function(){var t=this;this.$EventBus.$on("popBoxBlur",(function(){t.selectSongIndex=null})),this.$EventBus.$on("markSong",(function(){t.$store.commit("showDialog","add-mark-song")}))},activated:function(){!0===this.isKeepScrollPositon&&(this.$refs.songListBoxDOM.scrollTop=this.scrollerPosition)},methods:{playThisSong:function(t,e){var n={index:e,list:this.list};this.$store.commit("sendCurrentIndex",n),this.$store.dispatch("playCurrentSong")},showSinger:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(t),!(t.singer.length>1)){n.next=6;break}e.$store.commit("setChooseSingerList",t.singer),e.$store.commit("showDialog","choose-singer"),n.next=22;break;case 6:return s="",n.prev=7,n.next=10,Object(c["l"])({singerMid:t.singer[0].ID});case 10:o=n.sent,s=o.desc,n.next=18;break;case 14:n.prev=14,n.t0=n["catch"](7),console.log(n.t0),s="";case 18:i={singerName:t.singer[0].name,singerMid:t.singer[0].ID,singerPic:"http://y.gtimg.cn/music/photo_new/T001R150x150M000"+t.singer[0].ID+".jpg",singerDescription:s},console.log(i),e.$store.commit("setSingerInfo",i),e.$router.push({path:"SingerPage"});case 22:case"end":return n.stop()}}),n,null,[[7,14]])})))()},likeSong:function(t){this.$store.commit("sendLikedSong",t)},removeMarkSong:function(t){this.$store.commit("removeMarkSong",t)},setLikeImgUrl:function(t){var e=!1;return this.likedList.forEach((function(n){n.songID===t.songID&&(e=!0)})),e?this.likedImgUrl:this.likeImgUrl},setMarkImgUrl:function(t){var e=!1;return this.markList.forEach((function(n){n.list.forEach((function(n){n.songmid===t.songmid&&(e=!0)}))})),e?this.markedImgUrl:this.markImgUrl},showSingerName:function(t){var e=[];t.singer.forEach((function(t){e.push(t.name)}));var n=e.join("/");return n},backTop:function(){var t=this,e=setInterval((function(){t.$refs.songListBoxDOM.scrollTop-=100,t.$refs.songListBoxDOM.scrollTop<=0&&clearInterval(e)}),10)},scroll:function(t){this.scrollerPosition=t.target.scrollTop,this.scrollerPosition>600?this.isShowBackTop=!0:this.isShowBackTop=!1},mouseRightClick:function(t,e,n){this.selectSongIndex=n,this.$store.commit("sendSelectedSong",e),this.$popbox.showPopBox({positionX:t.pageX,positionY:t.pageY})},loadMore:function(){this.$emit("loadMore")}}},g=l,u=(n("8062"),n("2877")),d=Object(u["a"])(g,s,o,!1,null,null,null);e["a"]=d.exports},d770:function(t,e,n){"use strict";var s=n("2d5c"),o=n.n(s);o.a},e6d9:function(t,e,n){t.exports=n.p+"img/backtop.2bd771af.svg"}}]);
//# sourceMappingURL=chunk-345a86aa.d98b7521.js.map